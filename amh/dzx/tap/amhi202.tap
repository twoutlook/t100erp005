<add_points prog="amhi202" std_prog="amhi202" erpver="1.0" module="AMH" ver="1" env="s" zone="t10dev" booking="Y">
  <point name="construct.c.mhab001" cite_std="N" status="u" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[                        #此段落由子樣板a08產生
            #開窗c段
			INITIALIZE g_qryparam.* TO NULL
            LET g_qryparam.state = 'c'
			LET g_qryparam.reqry = FALSE
            CALL q_mhaa001()                           #呼叫開窗
            DISPLAY g_qryparam.return1 TO mhab001  #顯示到畫面上

            NEXT FIELD mhab001                     #返回原欄位

]]>
</point>
  <point name="construct.c.mhabsite" cite_std="N" status="u" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[                        #此段落由子樣板a08產生
            #開窗c段
			INITIALIZE g_qryparam.* TO NULL
            LET g_qryparam.state = 'c'
			LET g_qryparam.reqry = FALSE
			let g_qryparam.arg2= '2'
            CALL q_ooed004()                           #呼叫開窗
            DISPLAY g_qryparam.return1 TO mhabsite  #顯示到畫面上

            NEXT FIELD mhabsite                     #返回原欄位

]]>
</point>
  <point name="construct.c.mhabunit" cite_std="N" status="" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[            #此段落由子樣板a08產生
            #開窗c段
			INITIALIZE g_qryparam.* TO NULL
            LET g_qryparam.state = 'c'
			LET g_qryparam.reqry = FALSE
            CALL q_ooed004()                           #呼叫開窗
            DISPLAY g_qryparam.return1 TO mhabunit  #顯示到畫面上

            NEXT FIELD mhabunit                     #返回原欄位

]]>
</point>
  <point name="construct.c.page1.mhab002" cite_std="N" status="u" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[                        #此段落由子樣板a08產生
            #開窗c段
			INITIALIZE g_qryparam.* TO NULL
            LET g_qryparam.state = 'c'
			LET g_qryparam.reqry = FALSE
            CALL q_mhab002()                           #呼叫開窗
            DISPLAY g_qryparam.return1 TO mhab002  #顯示到畫面上

            NEXT FIELD mhab002                     #返回原欄位

]]>
</point>
  <point name="construct.c.page2.mhabcrtdp" cite_std="N" status="" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[            #此段落由子樣板a08產生
            #開窗c段
			INITIALIZE g_qryparam.* TO NULL
            LET g_qryparam.state = 'c'
			LET g_qryparam.reqry = FALSE
            CALL q_ooea001_1()                           #呼叫開窗
            DISPLAY g_qryparam.return1 TO mhabcrtdp  #顯示到畫面上

            NEXT FIELD mhabcrtdp                     #返回原欄位

]]>
</point>
  <point name="construct.c.page2.mhabcrtid" cite_std="N" status="" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[            #此段落由子樣板a08產生
            #開窗c段
			INITIALIZE g_qryparam.* TO NULL
            LET g_qryparam.state = 'c'
			LET g_qryparam.reqry = FALSE
            CALL q_ooag001()                           #呼叫開窗
            DISPLAY g_qryparam.return1 TO mhabcrtid  #顯示到畫面上

            NEXT FIELD mhabcrtid                     #返回原欄位

]]>
</point>
  <point name="construct.c.page2.mhabmodid" cite_std="N" status="" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[            #此段落由子樣板a08產生
            #開窗c段
			INITIALIZE g_qryparam.* TO NULL
            LET g_qryparam.state = 'c'
			LET g_qryparam.reqry = FALSE
            CALL q_ooag001()                           #呼叫開窗
            DISPLAY g_qryparam.return1 TO mhabmodid  #顯示到畫面上

            NEXT FIELD mhabmodid                     #返回原欄位

]]>
</point>
  <point name="construct.c.page2.mhabowndp" cite_std="N" status="" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[            #此段落由子樣板a08產生
            #開窗c段
			INITIALIZE g_qryparam.* TO NULL
            LET g_qryparam.state = 'c'
			LET g_qryparam.reqry = FALSE
            CALL q_ooea001_1()                           #呼叫開窗
            DISPLAY g_qryparam.return1 TO mhabowndp  #顯示到畫面上

            NEXT FIELD mhabowndp                     #返回原欄位

]]>
</point>
  <point name="construct.c.page2.mhabownid" cite_std="N" status="" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[            #此段落由子樣板a08產生
            #開窗c段
			INITIALIZE g_qryparam.* TO NULL
            LET g_qryparam.state = 'c'
			LET g_qryparam.reqry = FALSE
            CALL q_ooag001()                           #呼叫開窗
            DISPLAY g_qryparam.return1 TO mhabownid  #顯示到畫面上

            NEXT FIELD mhabownid                     #返回原欄位

]]>
</point>
  <point name="input.a.mhab001" cite_std="N" status="u" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[                        #此段落由子樣板a05產生
            LET g_mhab_m.mhab001_desc = null
            DISPLAY BY NAME g_mhab_m.mhab001_desc
            IF  NOT cl_null(g_mhab_m.mhab001) THEN 
               IF p_cmd = 'a' OR ( p_cmd = 'u' AND (g_mhab_m.mhab001 != g_mhab001_t )) THEN 
                  IF NOT ap_chk_notDup("","SELECT COUNT(*) FROM mhab_t WHERE "||"mhabent = '" ||g_enterprise|| "' AND "||"mhab001 = '"||g_mhab_m.mhab001 ||"'",'std-00004',0) THEN 
                     LET g_mhab_m.mhab001 = g_mhab_m_t.mhab001
                     CALL amhi202_mhab001_ref()
                     NEXT FIELD CURRENT
                  END IF
               END IF
            END IF


            IF NOT cl_null(g_mhab_m.mhab001) THEN 
#此段落由子樣板a19產生
               #設定g_chkparam.*的參數前，先將其初始化，避免之前設定遺留的參數值造成影響。
               INITIALIZE g_chkparam.* TO NULL
               
               #設定g_chkparam.*的參數
               LET g_chkparam.arg1 = g_mhab_m.mhab001
               LET g_chkparam.arg2 = g_mhab_m.mhabsite
                  
               #呼叫檢查存在並帶值的library
               IF cl_chk_exist("v_mhaa001") THEN
                  #檢查成功時後續處理
                  #LET  = g_chkparam.return1
                  #DISPLAY BY NAME 

               ELSE
                  #檢查失敗時後續處理
                  LET g_mhab_m.mhab001 = g_mhab_m_t.mhab001
                  CALL amhi202_mhab001_ref()
                  NEXT FIELD CURRENT
               END IF
            

            END IF
            CALL amhi202_mhab001_ref()            
]]>
</point>
  <point name="input.a.mhabsite" cite_std="N" status="u" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[                        LET g_mhab_m.mhabsite_desc = null
            DISPLAY BY NAME g_mhab_m.mhabsite_desc
            IF NOT cl_null(g_mhab_m.mhabsite) THEN
            IF p_cmd = 'a' OR ( p_cmd = 'u' AND (g_mhab_m.mhabsite != g_mhab_m_t.mhabsite or g_mhab_m_t.mhabsite is null )) THEN 
               #設定g_chkparam.*的參數前，先將其初始化，避免之前設定遺留的參數值造成影響。
               INITIALIZE g_chkparam.* TO NULL

               #設定g_chkparam.*的參數
               LET g_chkparam.arg1 = g_mhab_m.mhabsite
               LET g_chkparam.arg2 = '2'
               LET g_chkparam.arg3 = g_site


               #呼叫檢查存在並帶值的library
               IF cl_chk_exist("v_ooed004") THEN
                  #檢查成功時後續處理
                  #LET  = g_chkparam.return1
                  #DISPLAY BY NAME

               ELSE
                  #檢查失敗時後續處理
                  LET g_mhab_m.mhabsite = g_mhab_m_t.mhabsite
                  CALL amhi202_mhabsite_ref()
                  NEXT FIELD CURRENT
               END IF
               IF NOT cl_null(g_mhab_m.mhab001) THEN 
                  #設定g_chkparam.*的參數前，先將其初始化，避免之前設定遺留的參數值造成影響。
                  INITIALIZE g_chkparam.* TO NULL
               
                  #設定g_chkparam.*的參數
                  LET g_chkparam.arg1 = g_mhab_m.mhab001
                  LET g_chkparam.arg2 = g_mhab_m.mhabsite
                  
                  #呼叫檢查存在並帶值的library
                  IF cl_chk_exist("v_mhaa001") THEN
  
                  ELSE
                     #檢查失敗時後續處理
                     LET g_mhab_m.mhabsite = g_mhab_m_t.mhabsite
                     CALL amhi202_mhabsite_ref()
                     NEXT FIELD CURRENT
                  END IF
            

               END IF
            end if
            end if
            CALL amhi202_mhabsite_ref()
]]>
</point>
  <point name="input.a.mhabunit" cite_std="N" status="" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[            LET g_mhab_m.mhabunit_desc = null
            DISPLAY BY NAME g_mhab_m.mhabunit_desc
            IF NOT cl_null(g_mhab_m.mhabunit) THEN
#此段落由子樣板a19產生
               #設定g_chkparam.*的參數前，先將其初始化，避免之前設定遺留的參數值造成影響。
               INITIALIZE g_chkparam.* TO NULL

               #設定g_chkparam.*的參數
               LET g_chkparam.arg1 = g_mhab_m.mhabunit
               LET g_chkparam.arg2 = '2'
               LET g_chkparam.arg3 = g_site


               #呼叫檢查存在並帶值的library
               IF cl_chk_exist("v_ooed004") THEN
                  #檢查成功時後續處理
                  #LET  = g_chkparam.return1
                  #DISPLAY BY NAME

               ELSE
                  #檢查失敗時後續處理
                  LET g_mhab_m.mhabunit = g_mhab_m_t.mhabunit
                  CALL amhi202_mhabunit_ref()
                  NEXT FIELD CURRENT
               END IF
            end if
            CALL amhi202_mhabunit_ref()            
]]>
</point>
  <point name="input.a.page1.mhab002" cite_std="N" status="u" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[                        #此段落由子樣板a05產生
            IF  g_mhab_m.mhab001 IS NOT NULL AND g_mhab_d[g_detail_idx].mhab002 IS NOT NULL THEN 
               IF l_cmd = 'a' OR ( l_cmd = 'u' AND (g_mhab_d[g_detail_idx].mhab002 != g_mhab_d_t.mhab002 or g_mhab_d_t.mhab002 is null )) THEN 
                  IF NOT ap_chk_notDup("","SELECT COUNT(*) FROM mhab_t WHERE "||"mhabent = '" ||g_enterprise|| "' AND "||"mhab001 = '"||g_mhab_m.mhab001 ||"' AND "|| "mhab002 = '"||g_mhab_d[g_detail_idx].mhab002 ||"'",'std-00004',0) THEN 
                     let g_mhab_d[l_ac].mhab002 = g_mhab_d_t.mhab002
                     NEXT FIELD CURRENT
                  END IF
               END IF
            END IF

]]>
</point>
  <point name="input.a.page1.mhab008" cite_std="N" status="u" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[                        IF NOT cl_null(g_mhab_d[l_ac].mhab008) THEN 
            END IF 
]]>
</point>
  <point name="input.a.page1.mhab009" cite_std="N" status="u" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[                        IF NOT cl_null(g_mhab_d[l_ac].mhab009) THEN 
            END IF 
]]>
</point>
  <point name="input.a.page2.mhab002_2" cite_std="N" status="" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[            #此段落由子樣板a05產生
            IF  g_mhab_m.mhab001 IS NOT NULL AND g_mhab2_d[g_detail_idx].mhab002 IS NOT NULL THEN 
               IF l_cmd = 'a' OR ( l_cmd = 'u' AND (g_mhab_m.mhab001 != g_mhab001_t OR g_mhab2_d[g_detail_idx].mhab002 != g_mhab2_d_t.mhab002)) THEN 
                  IF NOT ap_chk_notDup("","SELECT COUNT(*) FROM mhab_t WHERE "||"mhabent = '" ||g_enterprise|| "' AND "||"mhab001 = '"||g_mhab_m.mhab001 ||"' AND "|| "mhab002 = '"||g_mhab2_d[g_detail_idx].mhab002 ||"'",'std-00004',0) THEN 
                     NEXT FIELD CURRENT
                  END IF
               END IF
            END IF

]]>
</point>
  <point name="input.c.mhab001" cite_std="N" status="u" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[            #此段落由子樣板a07產生            
            #開窗i段
			INITIALIZE g_qryparam.* TO NULL
            LET g_qryparam.state = 'i'
			LET g_qryparam.reqry = FALSE

            LET g_qryparam.default1 = g_mhab_m.mhab001             #給予default值
            LET g_qryparam.where = "mhaasite ='",g_mhab_m.mhabsite,"' "
            #給予arg

            CALL q_mhaa001()                                #呼叫開窗

            LET g_mhab_m.mhab001 = g_qryparam.return1              #將開窗取得的值回傳到變數

            DISPLAY g_mhab_m.mhab001 TO mhab001              #顯示到畫面上
            CALL amhi202_mhab001_ref()
            NEXT FIELD mhab001                          #返回原欄位

]]>
</point>
  <point name="input.c.mhabsite" cite_std="N" status="u" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[            #此段落由子樣板a07產生            
            #開窗i段
			INITIALIZE g_qryparam.* TO NULL
            LET g_qryparam.state = 'i'
			LET g_qryparam.reqry = FALSE

            LET g_qryparam.default1 = g_mhab_m.mhabsite             #給予default值

            #給予arg
            LET g_qryparam.arg1 = g_site #
            LET g_qryparam.arg2 = "2" #

            CALL q_ooed004()                                #呼叫開窗

            LET g_mhab_m.mhabsite = g_qryparam.return1              #將開窗取得的值回傳到變數

            DISPLAY g_mhab_m.mhabsite TO mhabsite              #顯示到畫面上
            CALL amhi202_mhabsite_ref()
            NEXT FIELD mhabsite                          #返回原欄位

]]>
</point>
  <point name="input.c.mhabunit" cite_std="N" status="" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[#此段落由子樣板a07產生            
            #開窗i段
			INITIALIZE g_qryparam.* TO NULL
            LET g_qryparam.state = 'i'
			LET g_qryparam.reqry = FALSE

            LET g_qryparam.default1 = g_mhab_m.mhabunit             #給予default值

            #給予arg
            LET g_qryparam.arg1 = g_site#
            LET g_qryparam.arg2 = "2" #

            CALL q_ooed004()                                #呼叫開窗

            LET g_mhab_m.mhabunit = g_qryparam.return1              #將開窗取得的值回傳到變數

            DISPLAY g_mhab_m.mhabunit TO mhabunit              #顯示到畫面上
            CALL amhi202_mhabunit_ref()
            NEXT FIELD mhabunit                          #返回原欄位

]]>
</point>
  <point name="ref_show.body.reference" cite_std="N" status="u" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[         INITIALIZE g_ref_fields TO NULL 
   LET g_ref_fields[1] = g_mhab_m.mhab001
   LET g_ref_fields[2] = g_mhab_d[l_ac].mhab002
   CALL ap_ref_array2(g_ref_fields," SELECT mhabl004 FROM mhabl_t WHERE mhablent = '"||g_enterprise||"' AND mhabl001 = ? AND mhabl002 = ? AND mhabl003 = '"||g_dlang||"'","") RETURNING g_rtn_fields 
   LET g_mhab_d[l_ac].mhabl004 = g_rtn_fields[1] 
   DISPLAY BY NAME g_mhab_d[l_ac].mhabl004
   
      INITIALIZE g_ref_fields TO NULL 
      LET g_ref_fields[1] = g_mhab_m.mhab001
      LET g_ref_fields[2] = g_mhab_d[l_ac].mhab002
      CALL ap_ref_array2(g_ref_fields," SELECT mhabl005 FROM mhabl_t WHERE mhablent = '"||g_enterprise||"' AND mhabl001 = ? AND mhabl002 = ? AND mhabl003 = '"||g_dlang||"'","") RETURNING g_rtn_fields 
      LET g_mhab_d[l_ac].mhabl005 = g_rtn_fields[1] 
      DISPLAY BY NAME g_mhab_d[l_ac].mhabl005
       call amhi202_mhabunit_ref()]]>
</point>
  <point name="ref_show.body2.reference" cite_std="N" status="u" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[                  INITIALIZE g_ref_fields TO NULL
            LET g_ref_fields[1] = g_mhab2_d[l_ac].mhabownid
            CALL ap_ref_array2(g_ref_fields,"SELECT oofa011 FROM oofa_t WHERE oofaent='"||g_enterprise||"' AND oofa002='2' AND oofa003=? ","") RETURNING g_rtn_fields
            LET g_mhab2_d[l_ac].mhabownid_desc = '', g_rtn_fields[1] , ''
            DISPLAY BY NAME g_mhab2_d[l_ac].mhabownid_desc

            INITIALIZE g_ref_fields TO NULL
            LET g_ref_fields[1] = g_mhab2_d[l_ac].mhabowndp
            CALL ap_ref_array2(g_ref_fields,"SELECT ooefl003 FROM ooefl_t WHERE ooeflent='"||g_enterprise||"' AND ooefl001=? AND ooefl002='"||g_dlang||"'","") RETURNING g_rtn_fields
            LET g_mhab2_d[l_ac].mhabowndp_desc = '', g_rtn_fields[1] , ''
            DISPLAY BY NAME g_mhab2_d[l_ac].mhabowndp_desc

            INITIALIZE g_ref_fields TO NULL
            LET g_ref_fields[1] = g_mhab2_d[l_ac].mhabcrtid
            CALL ap_ref_array2(g_ref_fields,"SELECT oofa011 FROM oofa_t WHERE oofaent='"||g_enterprise||"' AND oofa002='2' AND oofa003=? ","") RETURNING g_rtn_fields
            LET g_mhab2_d[l_ac].mhabcrtid_desc = '', g_rtn_fields[1] , ''
            DISPLAY BY NAME g_mhab2_d[l_ac].mhabcrtid_desc

            INITIALIZE g_ref_fields TO NULL
            LET g_ref_fields[1] = g_mhab2_d[l_ac].mhabcrtdp
            CALL ap_ref_array2(g_ref_fields,"SELECT ooefl003 FROM ooefl_t WHERE ooeflent='"||g_enterprise||"' AND ooefl001=? AND ooefl002='"||g_dlang||"'","") RETURNING g_rtn_fields
            LET g_mhab2_d[l_ac].mhabcrtdp_desc = '', g_rtn_fields[1] , ''
            DISPLAY BY NAME g_mhab2_d[l_ac].mhabcrtdp_desc

            INITIALIZE g_ref_fields TO NULL
            LET g_ref_fields[1] = g_mhab2_d[l_ac].mhabmodid
            CALL ap_ref_array2(g_ref_fields,"SELECT oofa011 FROM oofa_t WHERE oofaent='"||g_enterprise||"' AND oofa002='2' AND oofa003=? ","") RETURNING g_rtn_fields
            LET g_mhab2_d[l_ac].mhabmodid_desc = '', g_rtn_fields[1] , ''
            DISPLAY BY NAME g_mhab2_d[l_ac].mhabmodid_desc
]]>
</point>
  <point name="ref_show.head.reference" cite_std="N" status="u" ver="1" src="s" new="N" order="0" cite_ver="" mark_hard="N">
<![CDATA[               INITIALIZE g_ref_fields TO NULL
            LET g_ref_fields[1] = g_mhab_m.mhab001
            CALL ap_ref_array2(g_ref_fields,"SELECT mhaal003 FROM mhaal_t WHERE mhaalent='"||g_enterprise||"' AND mhaal001=? AND mhaal002='"||g_dlang||"'","") RETURNING g_rtn_fields
            LET g_mhab_m.mhab001_desc = '', g_rtn_fields[1] , ''
            DISPLAY BY NAME g_mhab_m.mhab001_desc

            INITIALIZE g_ref_fields TO NULL
            LET g_ref_fields[1] = g_mhab_m.mhabsite
            CALL ap_ref_array2(g_ref_fields,"SELECT ooefl003 FROM ooefl_t WHERE ooeflent='"||g_enterprise||"' AND ooefl001=? AND ooefl002='"||g_dlang||"'","") RETURNING g_rtn_fields
            LET g_mhab_m.mhabsite_desc = '', g_rtn_fields[1] , ''
            DISPLAY BY NAME g_mhab_m.mhabsite_desc

]]>
</point>
  <point name="function.amhi202_mhabunit_ref" cite_std="N" status="" ver="1" src="s" new="Y" order="1" cite_ver="" mark_hard="N">
<![CDATA[#display mhabunit
PRIVATE FUNCTION amhi202_mhabunit_ref()
   INITIALIZE g_ref_fields TO NULL
   LET g_ref_fields[1] = g_mhab_d[l_ac].mhabunit
   CALL ap_ref_array2(g_ref_fields,"SELECT ooefl003 FROM ooefl_t WHERE ooeflent='"||g_enterprise||"' AND ooefl001=? AND ooefl002='"||g_dlang||"'","") RETURNING g_rtn_fields
   LET g_mhab_d[l_ac].mhabunit_desc = '', g_rtn_fields[1] , ''
   DISPLAY BY NAME g_mhab_d[l_ac].mhabunit_desc
END FUNCTION]]>
</point>
  <point name="function.amhi202_mhabsite_ref" cite_std="N" status="" ver="1" src="s" new="Y" order="2" cite_ver="" mark_hard="N">
<![CDATA[#display mhabsite
PRIVATE FUNCTION amhi202_mhabsite_ref()
   INITIALIZE g_ref_fields TO NULL
   LET g_ref_fields[1] = g_mhab_m.mhabsite
   CALL ap_ref_array2(g_ref_fields,"SELECT ooefl003 FROM ooefl_t WHERE ooeflent='"||g_enterprise||"' AND ooefl001=? AND ooefl002='"||g_dlang||"'","") RETURNING g_rtn_fields
   LET g_mhab_m.mhabsite_desc = '', g_rtn_fields[1] , ''
   DISPLAY BY NAME g_mhab_m.mhabsite_desc
END FUNCTION]]>
</point>
  <point name="function.amhi202_mhab001_ref" cite_std="N" status="" ver="1" src="s" new="Y" order="3" cite_ver="" mark_hard="N">
<![CDATA[#display mhab001
PRIVATE FUNCTION amhi202_mhab001_ref()
   INITIALIZE g_ref_fields TO NULL
   LET g_ref_fields[1] = g_mhab_m.mhab001
   CALL ap_ref_array2(g_ref_fields,"SELECT mhaal003 FROM mhaal_t WHERE mhaalent='"||g_enterprise||"' AND mhaal001=? AND mhaal002='"||g_dlang||"'","") RETURNING g_rtn_fields
   LET g_mhab_m.mhab001_desc = '', g_rtn_fields[1] , ''
   DISPLAY BY NAME g_mhab_m.mhab001_desc
END FUNCTION]]>
</point>
  <point name="function.amhi202_chk_mhab006" cite_std="N" status="" ver="1" src="s" new="Y" order="4" cite_ver="" mark_hard="N">
<![CDATA[#chk mhab006
PRIVATE FUNCTION amhi202_chk_mhab006()
   DEFINE l_mhab006 LIKE mhab_t.mhab006
   DEFINE l_mhaa005 LIKE mhaa_t.mhaa005
   LET l_mhab006=0
   LET l_mhaa005=0
   let g_errno = null
   IF cl_null(g_mhab_d_t.mhab002) THEN
      SELECT sum(mhab006) INTO l_mhab006 FROM mhab_t
       WHERE mhabent = g_enterprise AND mhab001 = g_mhab_m.mhab001
         and mhabstus = 'Y'
   else
      SELECT sum(mhab006) INTO l_mhab006 FROM mhab_t
       WHERE mhabent = g_enterprise AND mhab001 = g_mhab_m.mhab001
         AND mhab002 <> g_mhab_d_t.mhab002  and mhabstus = 'Y'
   END IF 
   IF cl_null(l_mhab006) THEN
      LET l_mhab006=0
   END IF   
   LET l_mhab006 = l_mhab006 + g_mhab_d[l_ac].mhab006
   SELECT mhaa005 INTO l_mhaa005 FROM mhaa_t
    WHERE mhaaent = g_enterprise AND mhaa001 =  g_mhab_m.mhab001
      and mhaastus='Y' AND mhaasite = g_mhab_m.mhabsite
   IF l_mhab006>l_mhaa005 THEN
      LET g_errno="amh-00003"
   END IF   
END FUNCTION]]>
</point>
  <point name="function.amhi202_chk_mhab007" cite_std="N" status="" ver="1" src="s" new="Y" order="5" cite_ver="" mark_hard="N">
<![CDATA[#chk mhab007
PRIVATE FUNCTION amhi202_chk_mhab007()
   DEFINE l_mhab007 LIKE mhab_t.mhab007
   DEFINE l_mhaa006 LIKE mhaa_t.mhaa006
   LET l_mhab007=0
   LET l_mhaa006=0
   let g_errno = null
   IF cl_null(g_mhab_d_t.mhab002) THEN
      SELECT sum(mhab007) INTO l_mhab007 FROM mhab_t
       WHERE mhabent = g_enterprise AND mhab001 = g_mhab_m.mhab001
         AND mhabstus='Y'
   else
      SELECT sum(mhab007) INTO l_mhab007 FROM mhab_t
       WHERE mhabent = g_enterprise AND mhab001 = g_mhab_m.mhab001
         AND mhab002 <> g_mhab_d_t.mhab002 AND mhabstus='Y'
   END IF 
   IF cl_null(l_mhab007) THEN
      LET l_mhab007=0
   END IF   
   LET l_mhab007 = l_mhab007 + g_mhab_d[l_ac].mhab007
   SELECT mhaa006 INTO l_mhaa006 FROM mhaa_t
    WHERE mhaaent = g_enterprise AND mhaa001 =  g_mhab_m.mhab001
      and mhaastus='Y' AND mhaasite = g_mhab_m.mhabsite
   IF l_mhab007>l_mhaa006 THEN
      LET g_errno="amh-00004"
   END IF
END FUNCTION]]>
</point>
  <point name="function.amhi202_chk_mhabstus" cite_std="N" status="" ver="1" src="s" new="Y" order="6" cite_ver="" mark_hard="N">
<![CDATA[#chk mhabstus
PRIVATE FUNCTION amhi202_chk_mhabstus()
   DEFINE  l_cnt   like type_t.num5
   define  l_cnt1  like type_t.num5
   define  l_success  like type_t.num5
   define  l_errno    string
   let l_cnt = 0
   let l_cnt1 = 0
   let l_success = true
   let l_errno = null
   if g_mhab_d[l_ac].mhabstus='N' then
      select count(*) into l_cnt from mhac_t where mhacent = g_enterprise
         and mhac001 = g_mhab_m.mhab001 and mhac002 = g_mhab_d[l_ac].mhab002
         and mhacstus = 'Y'
      if l_cnt <= 0 then
         select count(*) into l_cnt1 from mhad_t where mhadent = g_enterprise
            and mhad001 = g_mhab_m.mhab001 and mhad002 = g_mhab_d[l_ac].mhab002
            and mhadstus = 'Y'
         if l_cnt1<=0 then
            return l_success,l_errno
         else
            IF cl_ask_confirm('amh-00016') THEN
               let l_success = TRUE
               return l_success,l_errno
            else
               let l_success = false
               return l_success,l_errno
            end if
         end if         
      else
         IF cl_ask_confirm('amh-00016') THEN
            let l_success = TRUE
            return l_success,l_errno
         else
            let l_success = false
            return l_success,l_errno
         end if
      end if      
   end if 
#   if g_mhab_d[l_ac].mhabstus='N' then
#      select sum(mhad005),sum(mhad006),sum(mhad007) 
#         into l_mhad005,l_mhad006,l_mhad007
#        from mhad_t
#       where mhadent = g_enterprise and mhad001=g_mhab_m.mhab001
#         and mhad002 = g_mhab_d[l_ac].mhab002
#      let l_mhab003=l_mhad005+ g_mhab_d[l_ac].mhab003
#      let l_mhab004=l_mhad006+ g_mhab_d[l_ac].mhab004
#      let l_mhab005=l_mhad007+ g_mhab_d[l_ac].mhab005
#      if l_mhab005> g_mhab_d[l_ac].mhab006 then
#         let l_errno = "amh-00009"
#         let l_success = false
#         return l_success,l_errno
#      end if
#      if l_mhab006> g_mhab_d[l_ac].mhab007 then
#         let l_errno = "amh-00010"
#         let l_success = false
#         return l_success,l_errno
#      end if      
#   end if 
      
   return l_success,l_errno
END FUNCTION]]>
</point>
  <point name="function.amhi202_mhabstus" cite_std="N" status="" ver="1" src="s" new="Y" order="7" cite_ver="" mark_hard="N">
<![CDATA[#chk mhabstus
PRIVATE FUNCTION amhi202_mhabstus()
   DEFINE  l_cnt   like type_t.num5
   DEFINE  l_cnt1  LIKE type_t.num5
   DEFINE  l_success  LIKE type_t.num5
   DEFINE  l_errno    STRING
   DEFINE  l_mhad005 LIKE mhad_t.mhad005
   DEFINE  l_mhad006 LIKE mhad_t.mhad006
   DEFINE  l_mhad007 LIKE mhad_t.mhad007
   DEFINE  l_mhab003 LIKE mhab_t.mhab003
   DEFINE  l_mhab004 LIKE mhab_t.mhab004
   DEFINE  l_mhab005 LIKE mhab_t.mhab005
   DEFINE  l_mhab006 LIKE mhab_t.mhab006
   DEFINE  l_mhab007 LIKE mhab_t.mhab007
   DEFINE  l_mhaa005 LIKE mhaa_t.mhaa005
   DEFINE  l_mhaa006 LIKE mhaa_t.mhaa006
   LET l_cnt = 0
   LET l_cnt1 = 0
   LET l_success = TRUE
   LET l_errno = NULL
   IF g_mhab_d[l_ac].mhabstus='Y' THEN
      LET l_cnt=0
      LET l_cnt1=0
      SELECT count(*) INTO l_cnt FROM mhaa_t WHERE mhaa001=g_mhab_m.mhab001
         AND mhaasite = g_mhab_m.mhabsite AND mhaastus='Y'
      IF l_cnt<=0 THEN
         LET l_errno = "amh-00017"
         LET l_success = FALSE
         RETURN l_success,l_errno
      END IF 
      SELECT sum(mhad005),sum(mhad006),sum(mhad007) 
         INTO l_mhad005,l_mhad006,l_mhad007
        FROM mhad_t
       WHERE mhadent = g_enterprise AND mhad001=g_mhab_m.mhab001
         AND mhad002 = g_mhab_d[l_ac].mhab002 AND mhadstus='Y'

      IF cl_null(l_mhad005) THEN
         LET l_mhad005 = 0
      END IF
      IF cl_null(l_mhad006) THEN
         LET l_mhad006 = 0
      END IF
      IF cl_null(l_mhad007) THEN
         LET l_mhad007 = 0
      END IF
      IF cl_null(g_mhab_d[l_ac].mhab006) THEN
         LET g_mhab_d[l_ac].mhab006 = 0
      END IF
      IF cl_null(g_mhab_d[l_ac].mhab007) THEN
         LET g_mhab_d[l_ac].mhab007 = 0
      END IF      
      LET l_mhab003=l_mhad005
      LET l_mhab004=l_mhad006
      LET l_mhab005=l_mhad007
      IF l_mhab003> g_mhab_d[l_ac].mhab006 THEN
         LET l_errno = "amh-00009"
         LET l_success = FALSE
         RETURN l_success,l_errno
      END IF
      IF l_mhab004> g_mhab_d[l_ac].mhab007 THEN
         LET l_errno = "amh-00010"
         LET l_success = FALSE
         RETURN l_success,l_errno
      END IF
      SELECT sum(mhab006),sum(mhab007)
        INTO l_mhab006,l_mhab007
        FROM mhab_t WHERE mhab001 = g_mhab_m.mhab001
         AND mhabent = g_enterprise AND mhabstus='Y' AND mhabsite = g_mhab_m.mhabsite
      SELECT sum(mhaa005),sum(mhaa006) 
        INTO l_mhaa005,l_mhaa006
        FROM mhaa_t WHERE  mhaa001 = g_mhab_m.mhab001
         AND mhaaent = g_enterprise AND mhaastus='Y' AND mhaasite = g_mhab_m.mhabsite 
      IF cl_null(l_mhab007) THEN
         LET l_mhab007 = 0
      END IF
      IF cl_null(l_mhab006) THEN
         LET l_mhab006 = 0
      END IF
      IF cl_null(l_mhaa005) THEN
         LET l_mhaa005 = 0
      END IF
      IF cl_null(l_mhaa006) THEN
         LET l_mhaa006 = 0
      END IF
      IF cl_null(g_mhab_d[l_ac].mhab006) THEN
         LET g_mhab_d[l_ac].mhab006 = 0
      END IF
      IF cl_null(g_mhab_d[l_ac].mhab007) THEN
         LET g_mhab_d[l_ac].mhab007 = 0
      END IF
      LET l_mhab006 = l_mhab006+ g_mhab_d[l_ac].mhab006
      LET l_mhab007 = l_mhab007+ g_mhab_d[l_ac].mhab007
      IF l_mhab006 > l_mhaa005 THEN
         LET l_errno = "amh-00003"
         LET l_success = FALSE
         RETURN l_success,l_errno
      END IF
      IF l_mhab007 > l_mhaa006 THEN
         LET l_errno = "amh-00004"
         LET l_success = FALSE
         RETURN l_success,l_errno
      END IF      
   END IF
   RETURN l_success,l_errno
END FUNCTION]]>
</point>
  <point name="b_fill.fill" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[                  let g_mhab2_d[l_ac].mhab002 = g_mhab_d[l_ac].mhab002]]>
</point>
  <point name="construct.c.page1.mhabunit" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[                        #此段落由子樣板a08產生
            #開窗c段
			INITIALIZE g_qryparam.* TO NULL
            LET g_qryparam.state = 'c'
			LET g_qryparam.reqry = FALSE
			LET g_qryparam.arg2 = '2'
            CALL q_ooed004()                           #呼叫開窗
            DISPLAY g_qryparam.return1 TO mhabunit  #顯示到畫面上

            NEXT FIELD mhabunit                     #返回原欄位

]]>
</point>
  <point name="delete.body.a_single_delete" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[      DELETE FROM mhabl_t
    WHERE mhablent = g_enterprise AND mhabl001 = g_mhab_m.mhab001 AND

          mhabl002 = g_mhab_d_t.mhab002
   IF SQLCA.sqlcode THEN
      CALL cl_err("mhabl_t",SQLCA.sqlcode,1)
      RETURN FALSE 
   END IF       ]]>
</point>
  <point name="delete.body.b_delete" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[            select count(*) into l_cnt from mhac_t where mhacent = g_enterprise and mhac001 = g_mhab_m.mhab001
      if l_cnt >0 then
         call cl_err("mhab_t","amh-00013",1)
         return
      end if
      select count(*) into l_cnt from mhad_t where mhadent = g_enterprise and mhad001 = g_mhab_m.mhab001
      if l_cnt >0 then
         call cl_err("mhab_t","amh-00013",1)
         return
      end if
      DELETE FROM mhabl_t WHERE mhablent = g_enterprise AND mhabl001 = g_mhab_m.mhab001
      IF SQLCA.sqlcode THEN
         CALL cl_err("mhab_t",SQLCA.sqlcode,0)
         CALL s_transaction_end('N','0')
         RETURN
      END IF]]>
</point>
  <point name="delete.define" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[      define  l_cnt           like type_t.num5]]>
</point>
  <point name="global.variable" cite_std="N" status="" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[define g_i                   like type_t.num5
define g_mhad005             like mhad_t.mhad005
define g_mhad006             like mhad_t.mhad006
define g_mhad007             like mhad_t.mhad007]]>
</point>
  <point name="input.a.page1.mhab006" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[                        IF g_mhab_d[l_ac].mhab006 IS NOT NULL THEN 
               IF l_cmd = 'a' OR ( l_cmd = 'u' AND ( g_mhab_d[l_ac].mhab006 != g_mhab_d_t.mhab006 OR g_mhab_d_t.mhab006 IS null)) THEN 
                  CALL amhi202_chk_mhab006()
                  IF NOT cl_null(g_errno) THEN
                     CALL cl_err(g_mhab_d[l_ac].mhab006,g_errno,1)
                     LET g_mhab_d[l_ac].mhab006 = g_mhab_d_t.mhab006 
                     NEXT FIELD mhab006                     
                  END IF
                  IF  g_mhab_d[l_ac].mhab006 IS NOT NULL AND g_mhab_d[l_ac].mhab003 is not null THEN
                     if g_mhab_d[l_ac].mhab006<g_mhab_d[l_ac].mhab003 then
                        call cl_err(g_mhab_d[l_ac].mhab006,"amh-00009",1)
                        let g_mhab_d[l_ac].mhab006 = g_mhab_d_t.mhab006
                        NEXT FIELD mhab006
                     END IF
                  END IF
               END IF
            END IF]]>
</point>
  <point name="input.a.page1.mhab007" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[                        IF g_mhab_d[l_ac].mhab007 IS NOT NULL THEN 
               IF l_cmd = 'a' OR ( l_cmd = 'u' AND ( g_mhab_d[l_ac].mhab007 != g_mhab_d_t.mhab007 OR g_mhab_d_t.mhab007 IS null)) THEN 
                  IF NOT cl_ap_chk_Range(g_mhab_d[l_ac].mhab007,"0","0","","","azz-00079",1) THEN
                     LET g_mhab_d[l_ac].mhab007 = g_mhab_d_t.mhab007 
                     NEXT FIELD mhab007
                  END IF
                  CALL amhi202_chk_mhab007()
                  IF NOT cl_null(g_errno) THEN
                     CALL cl_err(g_mhab_d[l_ac].mhab007,g_errno,1)
                     LET g_mhab_d[l_ac].mhab007 = g_mhab_d_t.mhab007 
                     NEXT FIELD mhab007                    
                  END IF
                  IF  g_mhab_d[l_ac].mhab007 IS NOT NULL AND g_mhab_d[l_ac].mhab004 is not null THEN
                     if g_mhab_d[l_ac].mhab007<g_mhab_d[l_ac].mhab004 then
                        call cl_err(g_mhab_d[l_ac].mhab007,"amh-00010",1)
                        let g_mhab_d[l_ac].mhab007 = g_mhab_d_t.mhab007
                        NEXT FIELD mhab007
                     END IF
                  END IF
               END IF
            END IF]]>
</point>
  <point name="input.a.page1.mhabstus" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[                        IF  g_mhab_d[l_ac].mhabstus IS NOT NULL THEN 
               IF l_cmd='a' or ( l_cmd = 'u' AND (g_mhab_d[l_ac].mhabstus != g_mhab_d_t.mhabstus OR g_mhab_d_t.mhabstus IS NULL )) THEN 
                  CALL amhi202_chk_mhabstus()
                  RETURNING g_success,g_errno
                  IF g_success THEN
                     LET g_i = TRUE
                  ELSE
                     LET g_i = FALSE
                     LET g_mhab_d[l_ac].mhabstus = g_mhab_d_t.mhabstus
                     NEXT FIELD mhabstus                      
                  END IF
                  CALL amhi202_mhabstus()
                  RETURNING g_success,g_errno
                  IF g_success THEN

                  ELSE
                     call cl_err(g_mhab_d[l_ac].mhabstus,g_errno,1)
                     LET g_mhab_d[l_ac].mhabstus = g_mhab_d_t.mhabstus
                     NEXT FIELD mhabstus                      
                  END IF
               END IF
            END IF]]>
</point>
  <point name="input.a.page1.mhabunit" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[                        LET g_mhab_d[l_ac].mhabunit_desc = null
            DISPLAY  g_mhab_d[l_ac].mhabunit_desc to s_detail1[l_ac].mhabunit_desc
            IF NOT cl_null(g_mhab_d[l_ac].mhabunit) THEN
#此段落由子樣板a19產生
               #設定g_chkparam.*的參數前，先將其初始化，避免之前設定遺
               INITIALIZE g_chkparam.* TO NULL

               #設定g_chkparam.*的參數
               LET g_chkparam.arg1 = g_mhab_d[l_ac].mhabunit
               LET g_chkparam.arg2 = '2'
               LET g_chkparam.arg3 = g_site


               #呼叫檢查存在並帶值的library
               IF cl_chk_exist("v_ooed004") THEN
                  #檢查成功時後續處理
                  #LET  = g_chkparam.return1
                  #DISPLAY BY NAME

               ELSE
                  #檢查失敗時後續處理
                  LET g_mhab_d[l_ac].mhabunit = g_mhab_d_t.mhabunit
                  CALL amhi202_mhabunit_ref()
                  NEXT FIELD CURRENT
               END IF
            end if
            CALL amhi202_mhabunit_ref() 
]]>
</point>
  <point name="input.body.b_delete" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[                              select count(*) into l_cnt1 from mhac_t where mhacent = g_enterprise and mhac001 = g_mhab_m.mhab001
                  and mhac002 = g_mhab_d_t.mhab002
               if l_cnt1 >0 then
                  call cl_err("mhab_t","amh-00013",1)
                  CANCEL DELETE
               end if
               select count(*) into l_cnt1 from mhad_t where mhadent = g_enterprise and mhad001 = g_mhab_m.mhab001
                  and mhad002 = g_mhab_d_t.mhab002
               if l_cnt1 >0 then
                  call cl_err("mhab_t","amh-00013",1)
                  CANCEL DELETE
               end if]]>
</point>
  <point name="input.body.b_update" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[                              IF g_mhab_d[l_ac].mhabstus <> g_mhab_d_t.mhabstus AND g_mhab_d_t.mhabstus='Y' AND g_i=true THEN
                  UPDATE mhad_t SET mhadstus = g_mhab_d[l_ac].mhabstus
                   WHERE mhadent = g_enterprise AND mhad001=g_mhab_m.mhab001
                     AND mhad002 = g_mhab_d_t.mhab002 
                  IF SQLCA.sqlcode THEN
                     CALL cl_err("mhab_t",SQLCA.sqlcode,1)
                     CALL s_transaction_end('N','0')
                     RETURN
                  END IF
                  UPDATE mhac_t SET mhacstus = g_mhab_d[l_ac].mhabstus
                   WHERE mhacent = g_enterprise AND mhac001=g_mhab_m.mhab001
                     AND mhac002 = g_mhab_d_t.mhab002
                  IF SQLCA.sqlcode THEN
                     CALL cl_err("mhab_t",SQLCA.sqlcode,1)
                     CALL s_transaction_end('N','0')
                     RETURN
                  END IF
                  select sum(mhad005),sum(mhad006),sum(mhad007) 
                    into g_mhad005,g_mhad006,g_mhad007
                    from mhad_t
                   where mhadent = g_enterprise AND mhad001=g_mhab_m.mhab001
                     and mhadstus='Y' and mhadsite = g_mhab_m.mhabsite 
                  update mhaa_t set mhaa002=g_mhad005,mhaa003 = g_mhad006,mhaa004 = g_mhad007
                   where mhaaent = g_enterprise AND mhaa001=g_mhab_m.mhab001
                     and mhaasite = g_mhab_m.mhabsite                 
                  IF SQLCA.sqlcode THEN
                     CALL cl_err("mhab_t",SQLCA.sqlcode,1)
                     CALL s_transaction_end('N','0')
                     RETURN
                  END IF
                  UPDATE mhac_t SET mhac004 = null,mhac005 = null,mhac006 = null
                   WHERE mhacent = g_enterprise AND mhac001=g_mhab_m.mhab001
                     AND mhac002 = g_mhab_d_t.mhab002 and mhacsite = g_mhab_m.mhabsite
                  IF SQLCA.sqlcode THEN
                     CALL cl_err("mhab_t",SQLCA.sqlcode,1)
                     CALL s_transaction_end('N','0')
                     RETURN
                  END IF
                  SELECT count(*) 
                    INTO l_cnt
                    FROM mhad_t
                   WHERE mhadent = g_enterprise AND mhad001=g_mhab_m.mhab001
                     AND mhad002 = g_mhab_d_t.mhab002 AND mhadsite = g_mhab_m.mhabsite            
                  IF l_cnt>0 THEN
                     CALL amhi202_update_ooef() RETURNING l_success
                     IF l_success=false THEN
                        CALL s_transaction_end('N','0')
                        RETURN
                     END IF
                  END IF
               END IF  
               select sum(mhad005),sum(mhad006),sum(mhad007) 
                 into g_mhab_d[l_ac].mhab003,g_mhab_d[l_ac].mhab004,g_mhab_d[l_ac].mhab005
                 from mhad_t
                where mhadent = g_enterprise AND mhad001=g_mhab_m.mhab001
                  and mhad002 = g_mhab_d_t.mhab002 and mhadstus='Y' and mhadsite = g_mhab_m.mhabsite
               IF SQLCA.sqlcode THEN
                  CALL cl_err("mhab_t",SQLCA.sqlcode,1)
                  CALL s_transaction_end('N','0')
                  RETURN
               END IF
               ]]>
</point>
  <point name="input.body.before_insert" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[                        LET g_mhab_d[l_ac].mhabstus = "Y"
            LET g_mhab_d[l_ac].mhabunit = g_site
            call amhi202_mhabunit_ref()
            SELECT count(*) INTO l_cnt FROM mhaa_t WHERE mhaa001=g_mhab_m.mhab001
               AND mhaasite = g_mhab_m.mhabsite AND mhaastus='Y'
            IF l_cnt<=0 THEN
               LET g_mhab_d[l_ac].mhabstus = "N"
            END IF
            LET g_mhab_d_t.mhabstus=g_mhab_d[l_ac].mhabstus]]>
</point>
  <point name="input.c.page1.mhabunit" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[            #此段落由子樣板a07產生            
            #開窗i段
			INITIALIZE g_qryparam.* TO NULL
            LET g_qryparam.state = 'i'
			LET g_qryparam.reqry = FALSE

            LET g_qryparam.default1 = g_mhab_d[l_ac].mhabunit             #給予default值

            #給予arg
            LET g_qryparam.arg1 = g_site #
            LET g_qryparam.arg2 = "2" #

            CALL q_ooed004()                                #呼叫開窗

            LET g_mhab_d[l_ac].mhabunit = g_qryparam.return1              #將開窗取得的值回傳到變數

            DISPLAY g_mhab_d[l_ac].mhabunit TO mhabunit              #顯示到畫面上
            call amhi202_mhabunit_ref() 
            NEXT FIELD mhabunit                          #返回原欄位

]]>
</point>
  <point name="input.define" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[      define  l_cnt1                 like type_t.num5
   DEFINE l_success              LIKE type_t.num5   ]]>
</point>
  <point name="input.detail_input.page1.update_item" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[                        LET g_action_choice="update_item"
            IF cl_auth_chk_act("update_item") THEN
               #add-point:ON ACTION update_item
               IF NOT cl_null(g_mhab_d[l_ac].mhab002)  THEN
                  CALL n_mhabl(g_mhab_m.mhab001,g_mhab_d[l_ac].mhab002)
                  INITIALIZE g_ref_fields TO NULL
                  LET g_ref_fields[1] = g_mhab_m.mhab001
                  LET g_ref_fields[2] = g_mhab_d[l_ac].mhab002

                  CALL ap_ref_array2(g_ref_fields," SELECT mhabl004,mhabl005 FROM mhabl_t WHERE mhablent = '"
                      ||g_enterprise||"' AND mhabl001 = ?  AND mhabl002 = ? AND mhabl003 = '"||g_dlang||"'","") RETURNING g_rtn_fields
                  LET g_mhab_d[l_ac].mhabl004 = g_rtn_fields[1]
                  LET g_mhab_d[l_ac].mhabl005 = g_rtn_fields[2]

                  DISPLAY BY NAME g_mhab_d[l_ac].mhabl004
                  DISPLAY BY NAME g_mhab_d[l_ac].mhabl005
               END IF
            END IF]]>
</point>
  <point name="input.head.b_input" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[                        IF l_cmd_t = 'r' THEN
            ELSE
               CALL amhi202_set_entry(p_cmd)
               CALL amhi202_set_no_entry(p_cmd)            
            END IF ]]>
</point>
  <point name="insert.default" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[            let g_mhab_m.mhabsite = g_site
      call amhi202_mhabsite_ref()
      let g_mhab_m_t.* = g_mhab_m.* ]]>
</point>
  <point name="reproduce.head.b_input" cite_std="N" status="u" ver="1" src="s" new="N" order="" cite_ver="" mark_hard="N">
<![CDATA[      LET g_mhab_m.mhab001_desc = ""
   DISPLAY BY NAME g_mhab_m.mhab001_desc]]>
</point>
  <point name="global.memo" cite_std="N" status="" ver="" src="" new="Y" order="">
<![CDATA[]]>
</point>
  <point name="global.import" cite_std="N" status="" ver="" src="" new="Y" order="">
<![CDATA[]]>
</point>
  <point name="global.argv" cite_std="N" status="" ver="" src="" new="Y" order="">
<![CDATA[]]>
</point>
  <point name="main.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="main.init" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="main.define_sql" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="main.after_define_sql" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="main.servicecall" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="main.before_close" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="main.exit" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="init.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="init.init" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="ui_dialog.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="ui_dialog.before_dialog" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="ui_dialog.body.before_row" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="ui_dialog.page1.action" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="ui_dialog.body2.before_row" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="ui_dialog.body2.action" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="ui_dialog.more_displayarray" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[         ]]>
</point>
  <point name="ui_dialog.before_dialog2" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="menu.delete" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="menu.insert" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="menu.modify" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="menu.modify_detail" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="menu.output" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="menu.query" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="menu.reproduce" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="browser_search.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="browser_fill.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="browser_fill.before_browser_fill" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="browser_fill.before_count" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="browser_fill.reference" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="ui_headershow.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="ui_detailshow.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="ui_detailshow.before" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="ui_detailshow.more" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="ui_detailshow.after" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="ui_browser_refresh.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="cs.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="cs.head.before" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="cs.head.before_construct" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.b.mhabsite" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.a.mhabsite" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.b.mhab001" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.a.mhab001" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="cs.body.before_construct" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.b.page1.mhabstus" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.a.page1.mhabstus" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.c.page1.mhabstus" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.b.page1.mhabunit" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.a.page1.mhabunit" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.b.page1.mhab002" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.a.page1.mhab002" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.b.page1.mhabl004" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.a.page1.mhabl004" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.c.page1.mhabl004" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.b.page1.mhabl005" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.a.page1.mhabl005" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.c.page1.mhabl005" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.b.page1.mhab006" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.a.page1.mhab006" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.c.page1.mhab006" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.b.page1.mhab007" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.a.page1.mhab007" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.c.page1.mhab007" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.b.page1.mhab008" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.a.page1.mhab008" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.c.page1.mhab008" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.b.page1.mhab009" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.a.page1.mhab009" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.c.page1.mhab009" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.b.page1.mhab003" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.a.page1.mhab003" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.c.page1.mhab003" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.b.page1.mhab004" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.a.page1.mhab004" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.c.page1.mhab004" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.b.page1.mhab005" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.a.page1.mhab005" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="construct.c.page1.mhab005" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="cs.more_construct" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="cs.before_dialog" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[         ]]>
</point>
  <point name="cs.after_construct" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="filter.add_cs" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="filter.b_dialog" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[         ]]>
</point>
  <point name="query.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="query.befroe_query" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="fetch.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="fetch.before_fetch" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="insert.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="insert.before" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="insert.after_insert" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="insert.after_insert2" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="modify.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="modify.before_input" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="modify.after_input" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="modify.b_key_update" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[         ]]>
</point>
  <point name="modify.m_key_update" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[         ]]>
</point>
  <point name="modify.a_key_update" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[         ]]>
</point>
  <point name="input.define_sql" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="input.after_define_sql" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="input.after_set_entry" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="input.after_set_no_entry" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="input.before_input" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   LET g_errshow=1]]>
</point>
  <point name="input.b.mhabsite" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.g.mhabsite" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.b.mhab001" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.g.mhab001" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.head.b_update" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="input.head.m_update" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="input.head.a_update" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[                     ]]>
</point>
  <point name="input.head.a_insert" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="input.body.before_input" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.body.before_row" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.body.b_insert" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="input.body.m_insert" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="input.body.a_insert" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="input.body.after_insert" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.body.a_delete" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.body.after_delete" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.b.page1.mhabstus" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.g.page1.mhabstus" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.b.page1.mhabunit" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.g.page1.mhabunit" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.b.page1.mhab002" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.g.page1.mhab002" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.b.page1.mhabl004" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.a.page1.mhabl004" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.g.page1.mhabl004" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.b.page1.mhabl005" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.a.page1.mhabl005" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.g.page1.mhabl005" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.b.page1.mhab006" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.g.page1.mhab006" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.b.page1.mhab007" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.g.page1.mhab007" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.b.page1.mhab008" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.g.page1.mhab008" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.b.page1.mhab009" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.g.page1.mhab009" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.b.page1.mhab003" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.a.page1.mhab003" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.g.page1.mhab003" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.b.page1.mhab004" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.a.page1.mhab004" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.g.page1.mhab004" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.b.page1.mhab005" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.a.page1.mhab005" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.g.page1.mhab005" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.c.page1.mhabstus" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.c.page1.mhab002" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.c.page1.mhabl004" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.c.page1.mhabl005" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.c.page1.mhab006" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.c.page1.mhab007" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.c.page1.mhab008" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.c.page1.mhab009" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.c.page1.mhab003" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.c.page1.mhab004" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.c.page1.mhab005" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.body.m_update" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="input.body.a_update" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[               ]]>
</point>
  <point name="input.body.after_input" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[            ]]>
</point>
  <point name="input.body2.action" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[         ]]>
</point>
  <point name="input.more_inputarray" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="input.before_dialog" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[         ]]>
</point>
  <point name="input.after_input" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="show.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="show.before" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="show.after" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="ref_show.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="reproduce.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="reproduce.after_reproduce" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="detail_reproduce.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="detail_reproduce.body.table1.b_insert" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="detail_reproduce.body.table1.m_insert" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="detail_reproduce.body.table1.a_insert" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="detail_reproduce.body.lang0.b_insert" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="detail_reproduce.lang0.table1.m_insert" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="detail_reproduce.lang0.table1.a_insert" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="delete.body.m_delete" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="delete.body.a_delete" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="b_fill.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="b_fill.sql_before" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="b_fill.sql_after" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="bfill.foreach" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[         ]]>
</point>
  <point name="b_fill.more" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="b_fill2.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="b_fill2.after_fill" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="before_delete.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="delete.body.b_single_delete" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="delete.body.m_single_delete" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="delete_b.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="insert_b.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="update_b.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="lock_b.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="unlock_b.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="set_entry.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="set_entry.field_control" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="set_entry.after_control" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="set_no_entry.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="set_no_entry.field_control" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="set_no_entry.after_control" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="set_entry_b.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="set_entry_b.set_entry_b" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="set_no_entry_b.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="set_no_entry_b.set_no_entry_b段" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="default_search.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="default_search.before" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="default_search.after" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="fill_chk.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="fill_chk.other" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="modify_detail_chk.define" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="modify_detail_chk.before" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="modify_detail_chk.page_control" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[      ]]>
</point>
  <point name="modify_detail_chk.after" cite_std="N" status="u" ver="" src="" new="Y" order="">
<![CDATA[   ]]>
</point>
  <point name="function.amhi202_update_ooef" cite_std="N" status="u" ver="" src="" new="Y" order="8">
<![CDATA[##update ooef111,ooef112,ooef113
PRIVATE FUNCTION amhi202_update_ooef()
DEFINE l_mhad005   LIKE ooef_t.ooef111
DEFINE l_mhad006   LIKE ooef_t.ooef112
DEFINE l_mhad007   LIKE ooef_t.ooef113
DEFINE l_success   LIKE type_t.num5

   LET l_success=true

   SELECT sum(mhad005),sum(mhad006),sum(mhad007)
     INTO l_mhad005,l_mhad006,l_mhad007
     FROM mhad_t
    WHERE mhadsite=g_mhab_m.mhabsite AND mhadstus='Y'
   UPDATE ooef_t SET ooef111=l_mhad005,
                     ooef112=l_mhad006,
                     ooef113=l_mhad007
    WHERE ooefent=g_enterprise AND ooef001=g_mhab_m.mhabsite
   IF SQLCA.sqlcode THEN
      CALL cl_err("mhad_t",SQLCA.sqlcode,1)
      LET l_success=false 
      RETURN l_success 
   END IF
   RETURN l_success
END FUNCTION]]>
</point>
</add_points>